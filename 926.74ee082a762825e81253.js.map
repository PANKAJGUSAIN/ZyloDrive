{"version":3,"file":"926.74ee082a762825e81253.js","mappings":"gLAOA,MA+CA,EA/CgCA,KAC5B,MAAM,kBAACC,IAAqBC,EAAAA,EAAAA,YAAWC,EAAAA,GACjCC,EAAQC,eAAeC,QAAQ,cAC/BC,EAAUC,IAAcC,EAAAA,EAAAA,WAAS,GACjCC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,MAoCjB,OAlCAC,EAAAA,EAAAA,YAAU,KACO,OAAVV,GACCM,EAAS,kBACTF,GAAW,IAEXO,EAAAA,EAAMC,KAAK,iDAAoD,CAAC,EAAG,CAC/DC,QAAQ,CACJC,cAAe,UAAUd,OAE9Be,MAAMC,IACL,MAAMC,EAAO,CACTC,MAAMF,EAASC,KAAKC,MACpBC,SAASH,EAASC,KAAKE,SACvBC,OAAOJ,EAASC,KAAKG,OACrBC,QAAQL,EAASC,KAAKI,SAE1BxB,EAAkBoB,GACO,mBAAtBT,EAASc,UAAuD,oBAAtBd,EAASc,SAClDhB,EAAS,iBAGTA,EAASE,EAASc,UAEtBlB,GAAW,EAAM,IAClBmB,OAAOC,IACNvB,eAAewB,WAAW,aAC1BnB,EAAS,kBACTF,GAAW,EACK,GAExB,GAEF,CAACJ,KAGC0B,EAAAA,EAAAA,KAAAC,EAAAA,SAAA,CAAAC,SACKzB,GAAUuB,EAAAA,EAAAA,KAAAC,EAAAA,SAAA,CAAAC,SAAE,kBAAiBF,EAAAA,EAAAA,KAACG,EAAAA,GAAM,KACtC,C","sources":["webpack://frontend/./src/pages/CaptainProtectedWrapper/CaptainProtectedWrapper.jsx"],"sourcesContent":["import axios from \"axios\"\r\nimport { useContext, useEffect, useState } from \"react\"\r\nimport { Outlet, useLocation, useNavigate } from \"react-router-dom\"\r\nimport { CaptainContext } from \"../../Context/CaptainContext\"\r\n\r\n\r\n\r\nconst CaptainProtectedWrapper = ()=>{\r\n    const {changeCaptainData} = useContext(CaptainContext)\r\n    const token = sessionStorage.getItem(\"zylotoken\")\r\n    const[loading , setLoading] = useState(true)\r\n    const navigate = useNavigate()\r\n    const location = useLocation()\r\n\r\n    useEffect(()=>{\r\n        if(token === null){\r\n            navigate(\"/captain-login\")\r\n            setLoading(false)\r\n        }else{\r\n            axios.post(`${process.env.REACT_APP_API_URL}/captains/profile`,{} ,{\r\n                headers:{\r\n                    Authorization: `Bearer ${token}`\r\n                },\r\n            }).then((response)=>{\r\n                const data = {\r\n                    email:response.data.email,\r\n                    fullname:response.data.fullname,\r\n                    status:response.data.status,\r\n                    vehicle:response.data.vehicle,\r\n                }\r\n                changeCaptainData(data)\r\n                if(location.pathname === \"/captain-login\" || location.pathname === \"/captain-signup\"){\r\n                    navigate(\"/captain-home\")\r\n                }\r\n                else{\r\n                    navigate(location.pathname)\r\n                }\r\n                setLoading(false)\r\n            }).catch((err)=>{\r\n                sessionStorage.removeItem(\"zylotoken\");\r\n                navigate(\"/captain-login\");\r\n                setLoading(false);\r\n                console.log(err)\r\n            })\r\n        }\r\n        \r\n    },[token])\r\n\r\n    return (\r\n        <>  \r\n            {loading ? <>Loading.....</>: <Outlet/>}\r\n        </>\r\n    )\r\n}\r\nexport default CaptainProtectedWrapper"],"names":["CaptainProtectedWrapper","changeCaptainData","useContext","CaptainContext","token","sessionStorage","getItem","loading","setLoading","useState","navigate","useNavigate","location","useLocation","useEffect","axios","post","headers","Authorization","then","response","data","email","fullname","status","vehicle","pathname","catch","err","removeItem","_jsx","_Fragment","children","Outlet"],"sourceRoot":""}