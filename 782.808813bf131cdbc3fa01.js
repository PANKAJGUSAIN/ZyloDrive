"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[782],{4782:(e,t,i)=>{i.r(t),i.d(t,{default:()=>u});var s=i(982),n=i(6540),a=i(5677),r=i(3227),l=i(9009),o=i(3555),d=i(181),c=i(6188),p=i(3404),h=i(4848);const u=(0,n.forwardRef)(((e,t)=>{let{}=e;const{captaindata:i}=(0,n.useContext)(a.S),u=(0,d.Zp)(),x=(0,n.useRef)(null),f=(0,n.useRef)(null),g=(0,n.useRef)(null),m=(0,d.zy)(),{data:y}=m.state||{},[j,v]=(0,n.useState)(""),[b,w]=(0,n.useState)(""),[A,C]=(0,n.useState)(!1);(0,n.useEffect)((()=>{y||u("/captain-home")}),[y]);return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{ref:x,style:{minHeight:"25%",overflow:"auto"},className:r.A.UserLocationWrapper,children:(0,h.jsxs)("div",{style:{padding:"2px"},children:[(0,h.jsx)("div",{title:"expand","data-ismaxed":"false",ref:f,tabIndex:0,role:"move-up",style:{cursor:"pointer",height:"5px",width:"20%",position:"absolute",left:"40%",background:"var(--item-border-hover-color)",borderRadius:"2px"},onClick:()=>{if(f.current){const e="true"===f.current.dataset.ismaxed;f.current.dataset.ismaxed=e?"false":"true",x.current.style.height=e?"5%":"100%"}}}),(0,h.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px",justifyContent:"space-between"},children:(0,h.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[(0,h.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/3135/3135715.png",alt:"captain",style:{width:"50px",height:"50px",borderRadius:"50%"}}),(0,h.jsx)("h3",{children:y?.user.fullname?.firstname+" "+y?.user.fullname?.lastname})]})}),(0,h.jsxs)("div",{style:{width:"100%",height:"auto",display:"flex",alignItems:"center",justifyContent:"space-evenly",gap:"5px",flexWrap:"wrap",borderRadius:"8px"},children:[(0,h.jsxs)("div",{style:{width:"100%"},className:l.A.ridelocationdetials,children:[(0,h.jsx)(s.g,{icon:c.gKm,style:{color:"var(--text-color)"}}),(0,h.jsx)("h5",{children:y?.pickup})]}),(0,h.jsx)("div",{style:{width:"100%"},className:l.A.RideLookupline}),(0,h.jsxs)("div",{style:{width:"100%"},className:l.A.ridelocationdetials,children:[(0,h.jsx)(s.g,{icon:c.THi,style:{color:"var(--text-color)"}}),(0,h.jsx)("h5",{children:y?.destination})]}),(0,h.jsx)("div",{className:l.A.RideLookupline}),(0,h.jsxs)("div",{style:{width:"100%"},className:l.A.ridelocationdetials,children:[(0,h.jsx)(s.g,{icon:c.E_u,style:{color:"var(--text-color)"}}),(0,h.jsx)("h5",{children:`â‚¹${y?.fare}`})]}),(0,h.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",marginTop:"10px"},children:(0,h.jsxs)("form",{style:{width:"100%"},noValidate:!0,children:[(0,h.jsxs)("div",{className:o.A.inputfieldContainer,children:[b.length>0?(0,h.jsxs)("p",{style:{fontSize:"14px",color:"red",fontWeight:"700"},children:[(0,h.jsx)(s.g,{icon:c.QJT,color:"red",style:{marginRight:"10px"}}),b]}):"",(0,h.jsx)("label",{htmlFor:"zyloDriverotpconfirmation",children:(0,h.jsx)("input",{id:"zyloDriverotpconfirmation","data-name":"confirmotp",name:"confirmotp",ref:g,className:o.A.inputfield,value:j,onChange:e=>v(e.target.value),style:b.length>0?{border:"2px solid red"}:{},placeholder:"Enter OTP",maxLength:"6",pattern:"\\d{6}",type:"text",required:!0})})]}),(0,h.jsx)(p.A,{type:"submit",disabled:A,style:{backgroundColor:"Green"},onClick:async e=>{if(e.preventDefault(),!j||j.length>6||j.length<6)g.current.focus(),w("Invalid OTP!");else{w(""),C(!0);const e=await fetch(`https://zylo-drive.vercel.app/rides/start-ride?rideId=${y._id}&otp=${j}`,{method:"GET",headers:{Authorization:`Bearer ${sessionStorage.getItem("zylotoken")}`}});if(e.ok){const t=await e.json();u("/captains/riding",{state:{data:t}}),C(!1)}else if(400===e.status){const t=await e.json();w(t.message),C(!1)}else if(500===e.status){const t=await e.json();w(t.message),C(!1)}else w(`Error: ${e.status}`),C(!1)}},children:A?"Confirming..":"Confirm"}),(0,h.jsx)(p.A,{type:"button",style:{backgroundColor:"Red"},onClick:()=>u("/captain-home"),children:"Reject"})]})})]})]})})})}))},3555:(e,t,i)=>{i.d(t,{A:()=>s});const s={UserLoginwrapper:"Ilr2sDTxcX6iN4oEhfPK",loginForm:"FGp0hyWKrGXQiF1JdGTG",inputfieldContainer:"qEfPOULVv1zTG4_yyTrB",multipleinputfieldwrapper:"T1n6SAbD7e3LJN_6FbwE",inputfieldLabelContainer:"qAEQVS1yl72RbrDYtolZ",inputfield:"VU3diMWWYxG9wxC3MHwJ",loginImage:"yUXAZUQPDsuF2Xn1SrWa",loginSvg:"ATp0h_XKuxATbVGYlvng",UsernotAvaliable:"JVuatc6KXxZoAhdbbzWf",separatorcontent:"hWVJsyUh6XPGoRTTFMnn",inputfielderror:"WG7qDk4pKxv8osuQAPDB"}}}]);
//# sourceMappingURL=782.808813bf131cdbc3fa01.js.map