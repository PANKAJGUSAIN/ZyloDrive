{"version":3,"file":"668.6db2e8a763d48fe14c60.js","mappings":"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","sources":["webpack://frontend/./src/components/RideLookout/RideLookout.jsx","webpack://frontend/./src/components/RideLookout/RideLookout.module.scss?9ef6"],"sourcesContent":["import { forwardRef, useContext, useEffect, useState } from \"react\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport styles from \"./RideLookout.module.scss\";\r\nimport carimg from \"../../assets/ZyloCar.png\";\r\nimport autoimg from \"../../assets/Zylo-Auto.png\";\r\nimport bikeimg from \"../../assets/Zylo-bike.png\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faBox, faCashRegister, faLocationDot } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { SocketContext } from \"../../Context/SocketContext\";\r\n\r\nconst RideLookout = forwardRef(({ }, ref) => {\r\n    const location = useLocation();\r\n    const navigate = useNavigate();\r\n    const { state } = location;\r\n    const { vehicle: selectedVehicle, location: selectedLocation , data } = state || {};\r\n    const [userWrapperRef] = ref;\r\n    const { socket , sendMessage, recieveMessage } = useContext(SocketContext); \r\n    const [loading, setLoading] = useState(true)\r\n\r\n    useEffect(() => {\r\n\r\n        console.log('location', state)\r\n        if (!selectedVehicle && !selectedLocation && !data) {\r\n            navigate(\"/home\")\r\n        }\r\n        setLoading(false)\r\n\r\n    }, [selectedVehicle, selectedLocation])\r\n\r\n\r\n    useEffect(() => {\r\n        if (userWrapperRef) {\r\n            userWrapperRef.current.style.bottom = \"0\";\r\n            userWrapperRef.current.style.height = \"100%\";\r\n        }\r\n    }, [])\r\n\r\n\r\n    useEffect(() => {\r\n        // window.history.pushState(null, null, window.location.pathname);\r\n        const handlePopState = (event) => {\r\n           const result = window.confirm(\"you are going back cancelling the ride\");\r\n           event.preventDefault();\r\n        //    console.log(\"user going back\" , result);\r\n        //    window.history.pushState(null, null, window.location.pathname);\r\n        //    window.history.pushState(null, null, window.location.pathname);\r\n        };\r\n\r\n        // Listen for changes in the location\r\n        window.addEventListener('popstate', handlePopState);\r\n        return () => {\r\n            window.removeEventListener('popstate', handlePopState);\r\n        };\r\n\r\n    }, [navigate]);\r\n\r\n    useEffect(()=>{\r\n        // const timer = setTimeout(() => {\r\n        //     navigate('/home/ridedetails', { state: { vehicle: selectedVehicle, location: selectedLocation } })\r\n        // }, 2000);\r\n        // return () => {\r\n        //     clearTimeout(timer);\r\n        // }\r\n\r\n\r\n        const confirmedRide = (data) =>{\r\n            console.log(data)\r\n            navigate('/home/ridedetails', { state: { vehicle: selectedVehicle, location: selectedLocation , data } })\r\n        }\r\n        \r\n\r\n        socket.on('ride_confirmed', confirmedRide)\r\n\r\n        return ()=>{\r\n            socket.off('ride_confirmed', confirmedRide)\r\n        }\r\n\r\n    },[])\r\n\r\n\r\n\r\n    return (\r\n        <>\r\n            {loading ?\r\n                <>Checking Conditions</> :\r\n                <div className={styles.RideLookupComponentWrapper}>\r\n                    <h3 style={{ padding: \"10px 10px 10px 10px\", textAlign: \"center\" }}>Looking for Nearby {selectedVehicle} Drivers</h3>\r\n                    <div className={styles.RideLookupLoading}>\r\n                    </div>\r\n                    <div style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"center\" }}>\r\n                        {selectedVehicle == \"car\" && <img loading=\"lazy\" className={styles.RideLookupVehicleLoading} src={carimg} alt=\"Car\" />}\r\n                        {selectedVehicle == \"auto\" && <img loading=\"lazy\" className={styles.RideLookupVehicleLoading} src={autoimg} alt=\"Auto\" />}\r\n                        {selectedVehicle == \"motorcycle\" && <img loading=\"lazy\" className={styles.RideLookupVehicleLoading} src={bikeimg} alt=\"Bike\" />}\r\n                    </div>\r\n                    <div className={styles.RideLookupline}>\r\n                    </div>\r\n                    <div className={styles.ridelocationdetials}>\r\n                        <FontAwesomeIcon icon={faLocationDot} style={{ color: \"var(--text-color)\" }} />\r\n                        <h5>{data?.pickup}</h5>\r\n                    </div>\r\n                    <div className={styles.RideLookupline}>\r\n                    </div>\r\n                    <div className={styles.ridelocationdetials}>\r\n                        <FontAwesomeIcon icon={faBox} style={{ color: \"var(--text-color)\" }} />\r\n                        <h5>{data?.destination}</h5>\r\n                    </div>\r\n                    <div className={styles.RideLookupline}>\r\n                    </div>\r\n                    <div className={styles.ridelocationdetials}>\r\n                        <FontAwesomeIcon icon={faCashRegister} style={{ color: \"var(--text-color)\" }} />\r\n                        <h5>{` ${data?.fare}`}</h5>\r\n                    </div>\r\n                </div>\r\n            }\r\n\r\n        </>\r\n    )\r\n})\r\nexport default RideLookout","// extracted by mini-css-extract-plugin\nexport default {\"RideLookupComponentWrapper\":\"x4C3LaQrpBX8OT7Az2_Q\",\"RideLookupLoading\":\"kwYq5mbVmpTo4k_18pwO\",\"loading\":\"oyFhbS2vuRRWTamj2boU\",\"RideLookupVehicleLoading\":\"FxyMBQhip_gUxIe8Cuql\",\"pulse\":\"BjdnhFedcd2HsFO7q9dh\",\"RideLookupline\":\"NZT54oimBP_70xzlfhQL\",\"ridelocationdetials\":\"LRNNaqs98sFl4o0W6i7r\"};"],"names":["forwardRef","_ref","ref","location","useLocation","navigate","useNavigate","state","vehicle","selectedVehicle","selectedLocation","data","userWrapperRef","socket","sendMessage","recieveMessage","useContext","SocketContext","loading","setLoading","useState","useEffect","current","style","bottom","height","handlePopState","event","window","confirm","preventDefault","addEventListener","removeEventListener","confirmedRide","on","off","_jsx","_Fragment","children","_jsxs","className","styles","RideLookupComponentWrapper","padding","textAlign","RideLookupLoading","display","alignItems","justifyContent","RideLookupVehicleLoading","src","carimg","alt","autoimg","bikeimg","RideLookupline","ridelocationdetials","FontAwesomeIcon","icon","faLocationDot","color","pickup","faBox","destination","faCashRegister","fare"],"sourceRoot":""}