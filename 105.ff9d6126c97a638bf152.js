"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[105,452],{1200:(e,t,n)=>{n.d(t,{A:()=>h});var s=n(181),a=n(8548),i=n(9105),o=n(982),l=n(7897),r=n(6540),c=n(3968),d=n(5677),p=n(4848);const h=e=>{const t=(0,s.Zp)(),n=(0,r.useRef)(),[h,u]=(0,r.useState)(!1),{captaindata:x}=(0,r.useContext)(d.S),{currentTheme:v,changeTheme:m,AvaliableThemes:g}=(0,r.useContext)(c.D),j="/ZyloDrive/captain-home"===location.pathname,f=()=>{if(n.current){const e="true"===n.current.getAttribute("data-userclick");n.current.setAttribute("data-userclick",!e)}},C=e=>{n.current&&!n.current.contains(e.target)&&n.current.setAttribute("data-userclick","false")};return(0,r.useEffect)((()=>(document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)})),[]),(0,p.jsxs)("div",{className:i.A.zyloDriveheader,children:[(0,p.jsxs)("div",{className:"logo",style:{cursor:"pointer"},onClick:()=>t("/"),children:[(0,p.jsx)(a.A,{}),(0,p.jsx)("p",{children:"ZyloDrive"})]}),(0,p.jsxs)("div",{title:"Avaliable Rides",onClick:()=>{j&&e.setOpenModal(!0)},tabIndex:0,style:{cursor:"pointer",backgroundColor:"var(--button-background-color)",width:"auto",height:"90%",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",fontSize:"12px",gap:"10px",padding:"0 10px",borderRadius:"8px",fontWeight:"600",color:"var(--button-text-color)"},children:["Find Rides",(0,p.jsx)(o.g,{icon:l.z$e,style:{fill:"red",stroke:"red",color:"red"}})]}),(0,p.jsx)("div",{title:"User Profile",tabIndex:0,onKeyDown:e=>{"Enter"===e.key&&f()},onClick:()=>{f()},className:i.A.userIcon,children:(0,p.jsx)(o.g,{icon:l.X46,style:{color:"var(--background-color)"},size:"lg"})}),(0,p.jsx)("div",{className:i.A.profileContainer,"data-userclick":"false",ref:n,children:(0,p.jsxs)("div",{className:i.A.profileContent,children:[(0,p.jsxs)("p",{style:{fontSize:"12px"},children:["Hello , ",x.fullname.firstname]}),(0,p.jsx)("div",{className:i.A.line}),(0,p.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,p.jsx)("label",{htmlFor:"themeSelect",style:{fontSize:"12px"},children:"Theme"}),(0,p.jsx)("select",{id:"themeSelect",name:"themeSelect",className:i.A.themeSelect,value:v,onChange:e=>m(e.target.value),children:g.map(((e,t)=>(0,p.jsx)("option",{value:e,children:e},t)))})]}),(0,p.jsx)("button",{className:i.A.popupbutton,type:"button",onClick:()=>{t("/captains/logout"),u(!h)},disabled:h,children:"Logout"})]})})]})}},2452:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var s=n(6540),a=n(1769),i=n(4848);const o={width:"100%",height:"100%"},l={lat:20.5937,lng:78.9629},r=()=>{const[e,t]=(0,s.useState)(l),[n,r]=(0,s.useState)(null);return(0,s.useEffect)((()=>{const e=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition((e=>{const{latitude:n,longitude:s}=e.coords;var a,i;i=s,(a=n)>=6.7&&a<=37.6&&i>=68.7&&i<=97.25&&(t({lat:n,lng:s}),r({lat:n,lng:s}))}),(e=>{}))};e();const n=setInterval(e,1e4);return()=>clearInterval(n)}),[]),(0,i.jsx)(a.aJ,{googleMapsApiKey:"AIzaSyCZ0gxF80l2lp_giCLEsoCoseKzqUqk5Sw",children:(0,i.jsx)(a.u6,{mapContainerStyle:o,center:e,zoom:10,children:n&&(0,i.jsx)(a.pH,{position:n})})})}},3404:(e,t,n)=>{n.d(t,{A:()=>o});const s="zr69Ky4MwXAl2OyUo0Bm",a="hPF7HRfQ5XbXiRO317jI";var i=n(4848);const o=e=>{const{type:t,children:n,...o}=e;return(0,i.jsx)("div",{className:`${s}`,children:(0,i.jsx)("button",{className:a,type:t,...o,children:n})})}},8548:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(4848);const a=()=>(0,s.jsxs)("svg",{version:"1.1",id:"Uploaded to svgrepo.com",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"40px",height:"40px",viewBox:"0 0 32 32",xmlSpace:"preserve",children:[(0,s.jsx)("style",{type:"text/css",children:"\n        .afiado_een { fill: #0B1719; }\n      "}),(0,s.jsx)("path",{className:"afiado_een",d:"M24,12V4H8v8H4v12h4v4h4v-4h8v4h4v-4h4V12H24z M12,20H8v-4h4V20z M12,12V8h8v4H12z M24,20h-4v-4h4V20z"})]})},1486:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var s=n(181),a=n(3227),i=n(6540),o=n(1200),l=n(5677),r=n(3590);const c="UqG907wlakD88PfsOwvn",d="hQ2SFRp_XBxI1ZPxjEda",p="hKXZdbTllimkaOC6JTdo",h="AQ_slyDmVhqGQ6FnqC8n",u="EnPvn1x6xWfFKGVTT0Av",x="xapJTU4lDHGTzZKLLgVd",v="x4qYDhRf1xAEn4HL5KLH";var m=n(9009),g=n(982),j=n(6188),f=n(3404),C=n(4848);const k=e=>{let{isOpen:t,onClose:n,data:a,closeOnOverlayClick:o=!1,ignoreData:r}=e;const k=(0,s.Zp)(),[y,A]=(0,i.useState)([]),{captaindata:b}=(0,i.useContext)(l.S),[N,S]=(0,i.useState)(!1);if((0,i.useEffect)((()=>{A(a)}),[a]),!t)return null;return(0,C.jsx)("div",{className:c,onClick:()=>{o&&n()},children:(0,C.jsxs)("div",{className:d,onClick:e=>e.stopPropagation(),children:[(0,C.jsx)("div",{style:{display:"flex",justifyContent:"end"},children:(0,C.jsx)(g.g,{title:"Close Popup",tabIndex:0,style:{height:"16px",width:"16px"},icon:j.yYc,onClick:n})}),y.length>0?a.map(((e,t)=>(0,C.jsx)("div",{className:p,children:(0,C.jsxs)("div",{children:[(0,C.jsxs)("div",{className:h,children:[(0,C.jsx)("h4",{children:e.user.fullname.firstname}),(0,C.jsx)("h4",{children:"2.2km"})]}),(0,C.jsxs)("div",{className:m.A.ridelocationdetials,children:[(0,C.jsx)(g.g,{icon:j.gKm,style:{color:"var(--text-color)"}}),(0,C.jsx)("h5",{children:e?.pickup})]}),(0,C.jsx)("div",{className:m.A.RideLookupline}),(0,C.jsxs)("div",{className:m.A.ridelocationdetials,children:[(0,C.jsx)(g.g,{icon:j.THi,style:{color:"var(--text-color)"}}),(0,C.jsx)("h5",{children:e?.destination})]}),(0,C.jsx)("div",{className:m.A.RideLookupline}),(0,C.jsx)("div",{className:m.A.ridelocationdetials,children:(0,C.jsx)("h5",{children:`â‚¹ ${e.fare}`})}),(0,C.jsx)(f.A,{style:{backgroundColor:"Green"},onClick:()=>(async e=>{S(!0);const t=await fetch("http://localhost:3000/rides/confirm",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${sessionStorage.getItem("zylotoken")}`},body:JSON.stringify({rideId:e,captainId:b._id})}),s=await t.json();n(),r(e),S(!1),k("/captain-home/confirm-Ride",{state:{data:s}})})(e._id),disabled:N,children:N?"Accepting..":"Accept"}),(0,C.jsx)(f.A,{style:{backgroundColor:"Red"},onClick:()=>{return t=e._id,void(1==y.length?(r(t),n()):r(t));var t},children:" Ignore"})]})},t))):(0,C.jsxs)("div",{className:u,children:[(0,C.jsx)("span",{children:"Looking For Rides"}),(0,C.jsxs)("div",{className:x,children:[(0,C.jsx)("div",{className:v}),(0,C.jsx)("div",{className:v}),(0,C.jsx)("div",{className:v})]})]})]})})};var y=n(2452);const A=(0,i.lazy)((()=>n.e(380).then(n.bind(n,9380)))),b=(0,i.lazy)((()=>n.e(782).then(n.bind(n,4782)))),N=()=>{(0,s.Zp)(),(0,i.useRef)(null);const{captaindata:e}=(0,i.useContext)(l.S),{socket:t,sendMessage:n,recieveMessage:c}=(0,i.useContext)(r.d),[d,p]=(0,i.useState)([]),[h,u]=(0,i.useState)(!1),x=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition((t=>{n("update-location-captain",{userId:e._id,location:{ltd:t.coords.latitude,lng:t.coords.longitude}})}),(e=>{}))};(0,i.useEffect)((()=>{n("join",{userType:"captain",userId:e._id});const s=setInterval((()=>{x()}),1e4);x();const a=e=>{p((t=>[...t,e]))};return t.on("new-ride",a),()=>{clearInterval(s),t.off("new-ride",a)}}),[]);return(0,C.jsxs)("div",{className:a.A.CaptainHomeWrapper,children:[(0,C.jsx)(o.A,{setOpenModal:u}),(0,C.jsx)(k,{isOpen:h,onClose:()=>{u(!1)},ignoreData:e=>{p((t=>t.filter((t=>t._id!==e))))},data:d||[],closeOnOverlayClick:!1}),(0,C.jsxs)("div",{className:a.A.CaptainMainWrapper,children:[(0,C.jsx)("div",{className:a.A.CaptainMapWrapper,children:(0,C.jsx)(y.default,{})}),(0,C.jsx)(i.Suspense,{fallback:(0,C.jsx)(C.Fragment,{children:"Loading subComponents...."}),children:(0,C.jsxs)(s.BV,{children:[(0,C.jsx)(s.qh,{path:"/",element:(0,C.jsx)(A,{})}),(0,C.jsx)(s.qh,{path:"/confirm-Ride",element:(0,C.jsx)(b,{})})]})}),(0,C.jsx)(s.sv,{})]})]})}},9105:(e,t,n)=>{n.d(t,{A:()=>s});const s={zyloDriveheader:"x006tMQKCbzmwMzioWq0",userIcon:"bXMAK1LMERpEQ4ImGY7S",profileContainer:"hVHgWjXNUJVg0Zk_FA2n",profileContent:"XSSX1bBJIDeEY8FJgIt3",line:"iEJ_Uuz1GPzRrlkrdDMq",themeSelect:"u2e_I8A_8_JOo7gNpdNs",popupbutton:"ACFv7YrQZVbus4_k40LF"}},9009:(e,t,n)=>{n.d(t,{A:()=>s});const s={RideLookupComponentWrapper:"x4C3LaQrpBX8OT7Az2_Q",RideLookupLoading:"kwYq5mbVmpTo4k_18pwO",loading:"oyFhbS2vuRRWTamj2boU",RideLookupVehicleLoading:"FxyMBQhip_gUxIe8Cuql",pulse:"BjdnhFedcd2HsFO7q9dh",RideLookupline:"NZT54oimBP_70xzlfhQL",ridelocationdetials:"LRNNaqs98sFl4o0W6i7r"}},3227:(e,t,n)=>{n.d(t,{A:()=>s});const s={CaptainHomeWrapper:"nuYJS7N9UkEQgX3FO4zj",CaptainMainWrapper:"CAt1L1vkSpP4j5F6qRA4",CaptainMapWrapper:"FH0tNgIHDcR2k5O9e0Co",UserLocationWrapper:"MD4A6fSJ1KVbSEqc1zj0"}}}]);
//# sourceMappingURL=105.ff9d6126c97a638bf152.js.map