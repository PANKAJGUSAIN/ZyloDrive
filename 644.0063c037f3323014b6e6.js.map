{"version":3,"file":"644.0063c037f3323014b6e6.js","mappings":"sLAOA,MAgDA,EAhD6BA,KACzB,MAAM,WAACC,IAAcC,EAAAA,EAAAA,YAAWC,EAAAA,GAC1BC,EAAQC,eAAeC,QAAQ,aAC/BC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,OACVC,EAASC,IAAcC,EAAAA,EAAAA,WAAS,GAqCvC,OAnCAC,EAAAA,EAAAA,YAAU,KACO,OAAVV,GACCG,EAAS,UACTK,GAAW,IAEXG,EAAAA,EAAMC,KAAK,8CAAiD,CAAC,EAAG,CAC5DC,QAAQ,CACJC,cAAe,UAAUd,OAE9Be,MAAMC,IAEL,MAAMC,EAAO,CACTC,IAAMF,EAASC,KAAKC,IACpBlB,MAAQgB,EAASC,KAAKjB,MACtBmB,MAAMH,EAASC,KAAKE,MACpBC,SAASJ,EAASC,KAAKG,UAE3BvB,EAAWoB,GACc,WAAtBZ,EAASgB,UAA+C,YAAtBhB,EAASgB,SAC1ClB,EAAS,SAGTA,EAASE,EAASgB,UAEtBb,GAAW,EAAM,IAClBc,OAAOC,IACNtB,eAAeuB,WAAW,aAC1BrB,EAAS,UACTK,GAAW,EACK,GAExB,GAEF,CAACR,KAGCyB,EAAAA,EAAAA,KAAAC,EAAAA,SAAA,CAAAC,SACKpB,EAAU,iBAAkBkB,EAAAA,EAAAA,KAACG,EAAAA,GAAM,KACrC,C","sources":["webpack://frontend/./src/pages/UserProtectedWrapper/UserProtectedWrapper.jsx"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\"\r\nimport { UserContext } from \"../../Context/UserContext\"\r\nimport { Outlet, useLocation, useNavigate } from \"react-router-dom\"\r\nimport axios from \"axios\"\r\n\r\n\r\n\r\nconst UserProtectedWrapper = ()=>{\r\n    const {changeData} = useContext(UserContext)\r\n    const token = sessionStorage.getItem(\"zylotoken\")\r\n    const navigate = useNavigate()\r\n    const location = useLocation();\r\n    const [loading, setLoading] = useState(true)\r\n\r\n    useEffect(()=>{\r\n        if(token === null){\r\n            navigate(\"/login\")\r\n            setLoading(false)\r\n        }else{\r\n            axios.post(`${process.env.REACT_APP_API_URL}/users/profile`,{} ,{\r\n                headers:{\r\n                    Authorization: `Bearer ${token}`\r\n                },\r\n            }).then((response)=>{\r\n                console.log(response)\r\n                const data = {\r\n                    _id : response.data._id ,\r\n                    token : response.data.token ,\r\n                    email:response.data.email,\r\n                    fullname:response.data.fullname,\r\n                }\r\n                changeData(data)\r\n                if(location.pathname === \"/login\" || location.pathname === \"/signup\"){\r\n                    navigate(\"/home\")\r\n                }\r\n                else{\r\n                    navigate(location.pathname)\r\n                }\r\n                setLoading(false)\r\n            }).catch((err)=>{\r\n                sessionStorage.removeItem(\"zylotoken\");\r\n                navigate(\"/login\");\r\n                setLoading(false);\r\n                console.log(err)\r\n            })\r\n        }\r\n        \r\n    },[token])\r\n\r\n    return (\r\n        <>\r\n            {loading ? \"Loading......\" : <Outlet/>}\r\n        </>\r\n    )\r\n}\r\nexport default UserProtectedWrapper"],"names":["UserProtectedWrapper","changeData","useContext","UserContext","token","sessionStorage","getItem","navigate","useNavigate","location","useLocation","loading","setLoading","useState","useEffect","axios","post","headers","Authorization","then","response","data","_id","email","fullname","pathname","catch","err","removeItem","_jsx","_Fragment","children","Outlet"],"sourceRoot":""}